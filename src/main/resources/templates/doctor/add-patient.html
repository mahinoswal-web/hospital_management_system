<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Patient Management | Doctor Portal</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { background-color: #f8f9fa; }
        .form-section-title {
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #6c757d;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 10px;
            margin-bottom: 20px;
            margin-top: 20px;
            font-weight: 700;
        }
        .card { border: none; border-radius: 15px; box-shadow: 0 4px 20px rgba(0,0,0,0.05); }
        .form-control:focus, .form-select:focus {
            border-color: #0d6efd;
            box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.15);
        }
        .btn-primary { padding: 10px 30px; font-weight: 600; border-radius: 8px; }
    </style>
</head>

<body>

    <nav class="navbar navbar-expand-lg navbar-dark bg-primary sticky-top shadow-sm">
        <div class="container">
            <a class="navbar-brand fw-bold" href="/doctor/docdashboard"><i class="fas fa-user-md me-2"></i>Doctor Portal</a>
            <div class="ms-auto">
                <a href="/doctor/docdashboard" class="btn btn-outline-light btn-sm">
                    <i class="fas fa-arrow-left me-1"></i> Back to Dashboard
                </a>
            </div>
        </div>
    </nav>

    <div class="container py-5">
        <div class="row justify-content-center">
            <div class="col-lg-10">
                <div class="card p-4 p-md-5">
                    
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <div>
                            <h2 class="fw-bold text-dark mb-1">
                                <i class="fas fa-user-edit text-primary me-2"></i>
                                <span th:text="${patient.id == null ? 'New Patient Registration' : 'Edit Patient Details'}">Form</span>
                            </h2>
                            <p class="text-muted" th:if="${patient.patientId != null}">
                                Editing Record ID: <span class="badge bg-secondary" th:text="${patient.patientId}">PAT-000</span>
                            </p>
                        </div>
                    </div>

                    <form th:action="@{/doctor/save-patient}" th:object="${patient}" method="post">
                        
                        <input type="hidden" th:field="*{id}">
                        <input type="hidden" th:field="*{patientId}">

                        <div class="row g-3">
                            <div class="col-md-12">
                                <div class="p-3 bg-light rounded border border-primary-subtle">
                                    <label class="form-label fw-bold text-primary">Current Condition Status</label>
                                    <select th:field="*{condition}" class="form-select form-select-lg fw-bold">
                                        <option value="Good" class="text-success">Good (Low Risk)</option>
                                        <option value="Stable" class="text-primary" selected>Stable (Routine)</option>
                                        <option value="Critical" class="text-danger">Critical (High Risk)</option>
                                    </select>
                                    <small class="text-muted">Set the initial triage status for the dashboard.</small>
                                </div>
                            </div>
                        </div>

                        <div class="form-section-title"><i class="fas fa-id-card me-2"></i>Personal Information</div>
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label class="form-label">Full Name <span class="text-danger">*</span></label>
                                <input type="text" th:field="*{fullName}" class="form-control" placeholder="e.g. John Doe" required>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Date of Birth <span class="text-danger">*</span></label>
                                <input type="datetime-local" th:field="*{dateOfBirth}" class="form-control" required>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">Gender</label>
                                <select th:field="*{gender}" class="form-select">
                                    <option value="Male">Male</option>
                                    <option value="Female">Female</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">Blood Group</label>
                                <select th:field="*{bloodGroup}" class="form-select">
                                    <option value="">Select...</option>
                                    <option value="A+">A+</option>
                                    <option value="A-">A-</option>
                                    <option value="B+">B+</option>
                                    <option value="B-">B-</option>
                                    <option value="O+">O+</option>
                                    <option value="O-">O-</option>
                                    <option value="AB+">AB+</option>
                                    <option value="AB-">AB-</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">Phone Number <span class="text-danger">*</span></label>
                                <input type="text" th:field="*{phone}" class="form-control" placeholder="10-digit mobile" required>
                            </div>
                        </div>

                        <div class="form-section-title mt-4"><i class="fas fa-weight me-2"></i>Physical Stats</div>
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label class="form-label">Height (cm)</label>
                                <input type="number" th:field="*{height}" class="form-control" placeholder="175">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Weight (kg)</label>
                                <input type="number" th:field="*{weight}" class="form-control" placeholder="70">
                            </div>
                        </div>

                        <div class="form-section-title mt-4"><i class="fas fa-notes-medical me-2"></i>Medical History</div>
                        <div class="row g-3">
                            <div class="col-md-4">
                                <label class="form-label">Allergies</label>
                                <textarea th:field="*{allergies}" class="form-control" rows="2" placeholder="e.g. Penicillin, Peanuts"></textarea>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">Chronic Diseases</label>
                                <textarea th:field="*{chronicDiseases}" class="form-control" rows="2" placeholder="e.g. Diabetes, Asthma"></textarea>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">Current Medications</label>
                                <textarea th:field="*{currentMedications}" class="form-control" rows="2" placeholder="e.g. Metformin 500mg"></textarea>
                            </div>
                        </div>

                        <div class="form-section-title mt-4"><i class="fas fa-lock me-2"></i>Account & Contact</div>
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label class="form-label">Email Address</label>
                                <input type="email" th:field="*{emailAddress}" class="form-control" placeholder="patient@example.com">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Login Password <span class="text-danger">*</span></label>
                                <input type="text" th:field="*{password}" class="form-control" value="pat123" required>
                                <small class="text-muted">Default is 'pat123'. Change if needed.</small>
                            </div>
                            <div class="col-12">
                                <label class="form-label">Residential Address</label>
                                <input type="text" th:field="*{residentialAddress}" class="form-control" placeholder="Full street address">
                            </div>
                            <div class="col-12">
                                <label class="form-label">Emergency Contact Info</label>
                                <input type="text" th:field="*{emergencyContact}" class="form-control" placeholder="Name and Phone Number">
                            </div>
                        </div>

                        <div class="d-grid gap-2 d-md-flex justify-content-md-end mt-5 pt-3 border-top">
                            <a href="/doctor/docdashboard" class="btn btn-light me-md-2 border">Cancel</a>
                            <button type="submit" class="btn btn-primary btn-lg shadow-sm">
                                <i class="fas fa-save me-2"></i> Save Patient Record
                            </button>
                        </div>

                    </form>
                    </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>